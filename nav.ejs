<style>
    .navbar-brand {
        margin: 0;
        font-size: 24px;
        font-weight: bold;
        font-style: italic;
        color: #fff;
    }

    .navbar {
        background-color: #d91656 !important;
        color: #082e12;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);

    }

    .nav_opt {
        text-decoration: none;
        color: #fff;
        font-size: 18px;
        font-weight: bold;
        font-style: normal;
    }

    .custom_container {
        margin-inline: 20px !important;
        max-width: unset !important;
    }

    .right_nav {
        gap: 22px;
        display: flex;
        align-items: center;
    }

    .wrapper{
        width: 420px;
        background: transparent;
        backdrop-filter: blur(5px);
        color: #d91656;
        border-radius: 12px;
        padding: 30px 40px;
        justify-self: center;
    }
    .wrapper h1{
        font-size: 36px;
        text-align: center;
    }
    .wrapper .input-box{
        position: relative;
        width: 100%;
        height: 50px;

        margin: 30px 0;
    }
    .input-box input{
        width: 100%;
        height: 100%;
        background: transparent;
        border: none;
        outline: none;
        border: 2px solid rgb(255, 202, 222);
        border-radius: 40px;
        font-size: 16px;
        color: #333;
        padding: 20px 45px 20px 20px;
        box-shadow: 0 0 5px rgb(255, 202, 222);
    }
    .input-box input::placeholder{
        color: #d91656;
    }
    .input-box i{
        position: absolute;
        right: 20px;
        top: 30%;
        transform: translate(-50%);
        font-size: 20px;

    }
    .wrapper .remember-forgot{
        display: flex;
        justify-content: space-between;
        font-size: 14.5px;
        margin: -15px 0 15px;
    }
    .remember-forgot label input{
        accent-color: #fff;
        margin-right: 3px;

    }
    .remember-forgot a{
        color: #d91656;
        text-decoration: none;

    }
    .remember-forgot a:hover{
        text-decoration: underline;
    }
    .wrapper .btn{
        width: 100%;
        height: 45px;
        background: #fff;
        border: none;
        outline: none;
        border-radius: 40px;
        box-shadow: 0 0 10px rgb(255, 165, 203);
        cursor: pointer;
        font-size: 16px;
        color: #d91656;
        font-weight: 600;
    }
    .wrapper .register-link{
        font-size: 14.5px;
        text-align: center;
        margin: 20px 0 15px;

    }
    .register-link p a{
        color: #d91656;
        text-decoration: none;
        font-weight: 600;
    }
    .register-link p a:hover{
        text-decoration: underline;
    }

    
    #btn_login {
        background-color: white;
        color: #d91656; 
        border-color: white; 
    }

    
    #btn_login:hover {
        background-color: #f0f0f0; 
        border-color: #f0f0f0;
    }

   
    .modal-body .wrapper .btn {
        background-color: white;
        color: #d91656;
    }

    /* เปลี่ยนสีปุ่ม Login ใน Modal เมื่อ hover */
    .modal-body .wrapper .btn:hover {
        background-color: #f0f0f0;
    }
    /* ส่วนของbooking */
    .search-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        align-items: center;
    }

    .search-row > div {
        flex: 1 1 150px; /* Adjust as needed for responsiveness */
        min-width: 150px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        color: #d91656; /* Pink Label Color */
        font-weight: bold;
    }

    select,
    input[type="date"],
    input[type="tel"] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ffb6c1; /* Light Pink Border */
        border-radius: 4px;
        margin-bottom: 10px;
        box-sizing: border-box;
        font-size: 16px;
        color: #333;
        box-shadow: 2px 2px 5px rgba(255, 165, 203, 0.3); /* Pink Box Shadow for Inputs */
        transition: box-shadow 0.3s ease; /* Optional: smooth transition for hover/focus */
    }

    select:hover,
    input[type="date"]:hover,
    input[type="tel"]:hover {
        box-shadow: 3px 3px 7px rgba(255, 165, 203, 0.5); /* Optional: stronger shadow on hover */
    }

    select:focus,
    input[type="date"]:focus,
    input[type="tel"]:focus {
        outline: none; /* Remove default focus outline */
        box-shadow: 3px 3px 7px rgba(255, 165, 203, 0.7); /* Optional: even stronger shadow on focus */
    }

    select option {
        background-color: #fff; /* Match select background */
        color: #d91656;
    }

    #available-rooms-display {
        font-style: italic;
        color: #777;
    }

    .search-button {
        background-color: #d91656; /* Pink Button Background */
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
        width: auto; /* Adjust width to content */
        display: block;
        margin-top: 15px;
    }

    .search-button:hover {
        background-color: #b31145; /* Darker Pink on Hover */
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .search-row {
            flex-direction: column;
        }

        .search-row > div {
            width: 100%;
            min-width: auto;
        }

        .search-button {
            width: 100%;
        }
    }
</style>
<nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container custom_container">
        <a class="navbar-brand" href="/">KekiRoom</a>
        <div class="right_nav">
            <a class="navbar-brand nav_opt" href="<%= hostname%>/contact">Contact</a>
            <a id="btn_booking" class="navbar-brand nav_opt" href='#' >Booking</a>
            <button id="btn_login" class="btn btn-outline-primary">Login</button>
        </div>
    </div>
</nav>

<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="wrapper">
                    <h1>Login</h1>
                    <div class="input-box">
                        <input type="text" name="user_name" placeholder="Username" >
                        <i class='bx bxs-user'></i>
                    </div>
                    <div class="input-box">
                        <input type="password" name="password" placeholder="Password" >
                        <i class='bx bxs-lock-alt'></i>
                    </div>
                    <div class="remember-forgot">
                        <label><input type="checkbox">Remember Me</label>
                        <a href="#">Forgot Password</a>
                    </div>
                    <button type="submit" class="btn" id="btn_login_modal">Login</button>
                    <div class="register-link">
                        <p>Do not have an account? <a href="#">Register</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="bookingModal" tabindex="-1" role="dialog" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="search-container">
                    <div class="search-row">
                        <div>
                            <label for="alley-select">Alley</label>
                            <select id="alley-select">
                                <option value="">Select Alley</option>
                                <option value="เกกีงาม 1">เกกีงาม 1</option>
                                <option value="เกกีงาม 2">เกกีงาม 2</option>
                                <option value="เกกีงาม 3">เกกีงาม 3</option>
                            </select>
                        </div>
                        <div>
                            <label for="hostel-select">Dormitory</label>
                            <select id="hostel-select">
                                <option value="">Select Dormitory</option>
                            </select>
                        </div>
                        <div>
                            <label for="room-type">Type</label>
                            <select id="room-type">
                                <option value="">Select Type</option>
                            </select>
                        </div>
                        <div>
                            <label for="checkin">Check In</label>
                            <input type="date" id="checkin" placeholder="DD/MM/YYYY">
                        </div>
                        <div>
                            <label for="duration">Duration</label>
                            <select id="duration">
                                <option value="3">3 Months</option>
                                <option value="6">6 Months</option>
                                <option value="12">12 Months</option>
                            </select>
                        </div>
                        <div>
                            <label for="rooms">Rooms (<span id="available-rooms-display"></span>)</label>
                            <select id="rooms">
                                <option value="1">1 Room</option>
                                <option value="2">2 Rooms</option>
                                <option value="3">3 Rooms</option>
                                <option value="4">4 Rooms</option>
                            </select>
                        </div>
                        <div>
                            <label for="telephone">Telephone</label>
                            <input type="tel" id="telephone" placeholder="Telephone Number">
                        </div>
                        <div>
                            <button class="search-button">Booking</button>
                        </div>
                    </div>
                </div>
                
                <script>
                    const alleySelect = document.getElementById('alley-select');
                    const hostelSelect = document.getElementById('hostel-select');
                    const roomTypeSelect = document.getElementById('room-type');
                    const roomsSelect = document.getElementById('rooms');
                    const availableRoomsDisplay = document.getElementById('available-rooms-display');
                
                    let availableRooms = {
                        fan: 10,
                        'air-conditioner': 10
                    };
                
                    alleySelect.addEventListener('change', () => {
                        hostelSelect.innerHTML = '<option value="">Select Dormitory</option>';
                        roomTypeSelect.innerHTML = '<option value="">Select Type</option>';
                        availableRooms = { fan: 10, 'air-conditioner': 10 };
                        updateAvailableRoomsDisplay();
                
                        if (alleySelect.value === 'เกกีงาม 1') {
                            const dorms = ['กฤตเมธ', 'ดวงระวี', 'ชัยพร', 'SSY', 'ขวัญพยงค์'];
                            dorms.forEach(dorm => {
                                const option = document.createElement('option');
                                option.value = dorm;
                                option.textContent = dorm;
                                hostelSelect.appendChild(option);
                            });
                        } else if (alleySelect.value === 'เกกีงาม 2') {
                            const dorms = ['ศิริวัฒน์', 'กมล', 'แตงกวา', 'สุรัชนี', 'J&W'];
                            dorms.forEach(dorm => {
                                const option = document.createElement('option');
                                option.value = dorm;
                                option.textContent = dorm;
                                hostelSelect.appendChild(option);
                            });
                        } else if (alleySelect.value === 'เกกีงาม 3') {
                            const dorms = ['วรรธนะ', 'จ้อยช้างเนียม', 'กัลยรัตน์', 'ณิชา', 'นาคบำรุงศรี'];
                            dorms.forEach(dorm => {
                                const option = document.createElement('option');
                                option.value = dorm;
                                option.textContent = dorm;
                                hostelSelect.appendChild(option);
                            });
                        }
                    });
                
                    hostelSelect.addEventListener('change', () => {
                        roomTypeSelect.innerHTML = '<option value="">Select Type</option>';
                        availableRooms = { fan: 10, 'air-conditioner': 10 };
                        updateAvailableRoomsDisplay();
                
                        const selectedHostel = hostelSelect.value;
                
                        if (selectedHostel === 'ชัยพร' || selectedHostel === 'ศิริวัฒน์' || selectedHostel === 'กัลยรัตน์') {
                            const fanOption = document.createElement('option');
                            fanOption.value = 'fan';
                            fanOption.textContent = 'Fan';
                            roomTypeSelect.appendChild(fanOption);
                        }
                
                        const airOption = document.createElement('option');
                        airOption.value = 'air-conditioner';
                        airOption.textContent = 'Air-conditioner';
                        roomTypeSelect.appendChild(airOption);
                    });
                
                    roomTypeSelect.addEventListener('change', () => {
                        updateAvailableRoomsDisplay();
                    });
                
                    function updateAvailableRoomsDisplay() {
                    const selectedType = roomTypeSelect.value;
                    availableRoomsDisplay.textContent = selectedType 
                        ? `vacant room: ${availableRooms[selectedType]}` 
                        : '';
                }
                
                    const searchButton = document.querySelector('.search-button');
                
                
                    searchButton.addEventListener('click', () => {
                        const alley = document.getElementById('alley-select').value;
                        const hostel = document.getElementById('hostel-select').value;
                        const roomType = document.getElementById('room-type').value;
                        const checkin = document.getElementById('checkin').value;
                        const duration = document.getElementById('duration').value;
                        const rooms = parseInt(document.getElementById('rooms').value);
                        const telephone = document.getElementById('telephone').value;
                
                        if (!alley || !hostel || !checkin || !roomType) {
                            Swal.fire({
                                    title: "Please complete all fields",
                                    // text: data.status?"success":"error",
                                    icon: "warning"
                                });
                            return;
                        }
                        const data ={alley,hostel,roomType,checkin,duration,rooms,telephone}
                        $.ajax({
                            url: "/booking_add" ,
                            data: data,
                            method: "post",
                            dataType: "json",
                            success: function (data) {
                                console.log('data :>> ', data);
                                Swal.fire({
                                    title: data.status?"success":"error",
                                    // text: data.status?"success":"error",
                                    icon: data.status?"success":"error"
                                });
                                
                            }
                        })
                
                        if (rooms > availableRooms[roomType]) {
                            alert(`Sorry, only ${availableRooms[roomType]} rooms are available.`);
                            return;
                        }
                
                        availableRooms[roomType] -= rooms;
                        updateAvailableRoomsDisplay();
                
                        console.log('Form data:', { alley, hostel, roomType, checkin, duration, rooms, telephone });
                        // alert('Booking request submitted!');
                    });
                </script>

            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        $('#btn_login').on('click', function() {
            $('#loginModal').modal('show')
        })
    })
    $(document).ready(function(){
        $('#btn_booking').on('click', function() {
            $('#bookingModal').modal('show')
        })
    })
</script>

